<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Data Annotation Platform</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: '#5D5CDE',
                        'primary-dark': '#4A49C5',
                    }
                }
            }
        }
    </script>
    <style>
        .rating-button {
            transition: all 0.2s ease;
        }
        .rating-button:hover {
            transform: translateY(-2px);
        }
        .rating-button.selected {
            transform: scale(1.05);
        }
        .task-card {
            transition: all 0.3s ease;
        }
        .task-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 25px rgba(93, 92, 222, 0.15);
        }
        .fade-in {
            animation: fadeIn 0.3s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-white dark:bg-[#181818] text-gray-900 dark:text-gray-100 min-h-screen transition-colors">
    <!-- Header -->
    <header class="bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-800 sticky top-0 z-10">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-primary rounded-lg flex items-center justify-center">
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path>
                        </svg>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold text-gray-900 dark:text-white">AI Data Annotation</h1>
                        <p class="text-sm text-gray-600 dark:text-gray-400" id="userInfo">Annotator Dashboard</p>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="text-right hidden sm:block">
                        <p class="text-sm text-gray-600 dark:text-gray-400">Completed Today</p>
                        <p class="text-lg font-semibold text-primary" id="completedCount">0</p>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Task List View -->
        <div id="taskListView">
            <div class="mb-6 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4">
                <div>
                    <h2 class="text-2xl font-bold text-gray-900 dark:text-white">Available Tasks</h2>
                    <p class="text-gray-600 dark:text-gray-400 mt-1">Select a task to begin annotation</p>
                </div>
                <div class="flex items-center space-x-3">
                    <select id="filterStatus" class="px-4 py-2 text-base bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                        <option value="all">All Tasks</option>
                        <option value="pending">Pending</option>
                        <option value="completed">Completed</option>
                    </select>
                </div>
            </div>

            <!-- Task Cards -->
            <div id="taskCards" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Task cards will be inserted here -->
            </div>
        </div>

        <!-- Annotation View -->
        <div id="annotationView" class="hidden fade-in">
            <div class="mb-6">
                <button id="backButton" class="flex items-center text-primary hover:text-primary-dark transition-colors">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                    </svg>
                    Back to Tasks
                </button>
            </div>

            <div class="bg-white dark:bg-gray-900 rounded-xl shadow-lg border border-gray-200 dark:border-gray-800 overflow-hidden">
                <!-- Task Header -->
                <div class="bg-gradient-to-r from-primary to-purple-600 p-6 text-white">
                    <h2 id="taskTitle" class="text-2xl font-bold mb-2"></h2>
                    <p id="taskDescription" class="text-purple-100"></p>
                </div>

                <!-- Task Content -->
                <div class="p-6 space-y-6">
                    <!-- Prompt Section -->
                    <div>
                        <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-3 flex items-center">
                            <svg class="w-5 h-5 mr-2 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"></path>
                            </svg>
                            User Prompt
                        </h3>
                        <div id="promptContent" class="bg-gray-50 dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700">
                        </div>
                    </div>

                    <!-- AI Response Section -->
                    <div>
                        <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-3 flex items-center">
                            <svg class="w-5 h-5 mr-2 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
                            </svg>
                            AI Response
                        </h3>
                        <div id="responseContent" class="bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 border border-blue-200 dark:border-blue-800">
                        </div>
                    </div>

                    <!-- Annotation Form -->
                    <div class="border-t border-gray-200 dark:border-gray-800 pt-6">
                        <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-6">Rate This Response</h3>

                        <form id="annotationForm" class="space-y-8">
                            <!-- Accuracy -->
                            <div class="rating-section">
                                <label class="block text-base font-semibold text-gray-900 dark:text-white mb-3">
                                    Accuracy
                                    <span class="text-sm font-normal text-gray-600 dark:text-gray-400 ml-2">How factually correct is the response?</span>
                                </label>
                                <div class="flex flex-wrap gap-2">
                                    <button type="button" class="rating-button px-6 py-3 text-base bg-gray-100 dark:bg-gray-800 hover:bg-primary hover:text-white border border-gray-300 dark:border-gray-700 rounded-lg transition-colors" data-rating="accuracy" data-value="1">1 - Very Inaccurate</button>
                                    <button type="button" class="rating-button px-6 py-3 text-base bg-gray-100 dark:bg-gray-800 hover:bg-primary hover:text-white border border-gray-300 dark:border-gray-700 rounded-lg transition-colors" data-rating="accuracy" data-value="2">2 - Inaccurate</button>
                                    <button type="button" class="rating-button px-6 py-3 text-base bg-gray-100 dark:bg-gray-800 hover:bg-primary hover:text-white border border-gray-300 dark:border-gray-700 rounded-lg transition-colors" data-rating="accuracy" data-value="3">3 - Neutral</button>
                                    <button type="button" class="rating-button px-6 py-3 text-base bg-gray-100 dark:bg-gray-800 hover:bg-primary hover:text-white border border-gray-300 dark:border-gray-700 rounded-lg transition-colors" data-rating="accuracy" data-value="4">4 - Accurate</button>
                                    <button type="button" class="rating-button px-6 py-3 text-base bg-gray-100 dark:bg-gray-800 hover:bg-primary hover:text-white border border-gray-300 dark:border-gray-700 rounded-lg transition-colors" data-rating="accuracy" data-value="5">5 - Very Accurate</button>
                                </div>
                            </div>

                            <!-- Relevance -->
                            <div class="rating-section">
                                <label class="block text-base font-semibold text-gray-900 dark:text-white mb-3">
                                    Relevance
                                    <span class="text-sm font-normal text-gray-600 dark:text-gray-400 ml-2">How well does it address the prompt?</span>
                                </label>
                                <div class="flex flex-wrap gap-2">
                                    <button type="button" class="rating-button px-6 py-3 text-base bg-gray-100 dark:bg-gray-800 hover:bg-primary hover:text-white border border-gray-300 dark:border-gray-700 rounded-lg transition-colors" data-rating="relevance" data-value="1">1 - Off-topic</button>
                                    <button type="button" class="rating-button px-6 py-3 text-base bg-gray-100 dark:bg-gray-800 hover:bg-primary hover:text-white border border-gray-300 dark:border-gray-700 rounded-lg transition-colors" data-rating="relevance" data-value="2">2 - Somewhat Relevant</button>
                                    <button type="button" class="rating-button px-6 py-3 text-base bg-gray-100 dark:bg-gray-800 hover:bg-primary hover:text-white border border-gray-300 dark:border-gray-700 rounded-lg transition-colors" data-rating="relevance" data-value="3">3 - Neutral</button>
                                    <button type="button" class="rating-button px-6 py-3 text-base bg-gray-100 dark:bg-gray-800 hover:bg-primary hover:text-white border border-gray-300 dark:border-gray-700 rounded-lg transition-colors" data-rating="relevance" data-value="4">4 - Relevant</button>
                                    <button type="button" class="rating-button px-6 py-3 text-base bg-gray-100 dark:bg-gray-800 hover:bg-primary hover:text-white border border-gray-300 dark:border-gray-700 rounded-lg transition-colors" data-rating="relevance" data-value="5">5 - Highly Relevant</button>
                                </div>
                            </div>

                            <!-- Safety -->
                            <div class="rating-section">
                                <label class="block text-base font-semibold text-gray-900 dark:text-white mb-3">
                                    Safety
                                    <span class="text-sm font-normal text-gray-600 dark:text-gray-400 ml-2">Is the content safe and appropriate?</span>
                                </label>
                                <div class="flex flex-wrap gap-2">
                                    <button type="button" class="rating-button px-6 py-3 text-base bg-gray-100 dark:bg-gray-800 hover:bg-primary hover:text-white border border-gray-300 dark:border-gray-700 rounded-lg transition-colors" data-rating="safety" data-value="1">1 - Unsafe</button>
                                    <button type="button" class="rating-button px-6 py-3 text-base bg-gray-100 dark:bg-gray-800 hover:bg-primary hover:text-white border border-gray-300 dark:border-gray-700 rounded-lg transition-colors" data-rating="safety" data-value="2">2 - Potentially Unsafe</button>
                                    <button type="button" class="rating-button px-6 py-3 text-base bg-gray-100 dark:bg-gray-800 hover:bg-primary hover:text-white border border-gray-300 dark:border-gray-700 rounded-lg transition-colors" data-rating="safety" data-value="3">3 - Neutral</button>
                                    <button type="button" class="rating-button px-6 py-3 text-base bg-gray-100 dark:bg-gray-800 hover:bg-primary hover:text-white border border-gray-300 dark:border-gray-700 rounded-lg transition-colors" data-rating="safety" data-value="4">4 - Safe</button>
                                    <button type="button" class="rating-button px-6 py-3 text-base bg-gray-100 dark:bg-gray-800 hover:bg-primary hover:text-white border border-gray-300 dark:border-gray-700 rounded-lg transition-colors" data-rating="safety" data-value="5">5 - Very Safe</button>
                                </div>
                            </div>

                            <!-- Helpfulness -->
                            <div class="rating-section">
                                <label class="block text-base font-semibold text-gray-900 dark:text-white mb-3">
                                    Helpfulness
                                    <span class="text-sm font-normal text-gray-600 dark:text-gray-400 ml-2">How useful is this response?</span>
                                </label>
                                <div class="flex flex-wrap gap-2">
                                    <button type="button" class="rating-button px-6 py-3 text-base bg-gray-100 dark:bg-gray-800 hover:bg-primary hover:text-white border border-gray-300 dark:border-gray-700 rounded-lg transition-colors" data-rating="helpfulness" data-value="1">1 - Not Helpful</button>
                                    <button type="button" class="rating-button px-6 py-3 text-base bg-gray-100 dark:bg-gray-800 hover:bg-primary hover:text-white border border-gray-300 dark:border-gray-700 rounded-lg transition-colors" data-rating="helpfulness" data-value="2">2 - Slightly Helpful</button>
                                    <button type="button" class="rating-button px-6 py-3 text-base bg-gray-100 dark:bg-gray-800 hover:bg-primary hover:text-white border border-gray-300 dark:border-gray-700 rounded-lg transition-colors" data-rating="helpfulness" data-value="3">3 - Neutral</button>
                                    <button type="button" class="rating-button px-6 py-3 text-base bg-gray-100 dark:bg-gray-800 hover:bg-primary hover:text-white border border-gray-300 dark:border-gray-700 rounded-lg transition-colors" data-rating="helpfulness" data-value="4">4 - Helpful</button>
                                    <button type="button" class="rating-button px-6 py-3 text-base bg-gray-100 dark:bg-gray-800 hover:bg-primary hover:text-white border border-gray-300 dark:border-gray-700 rounded-lg transition-colors" data-rating="helpfulness" data-value="5">5 - Very Helpful</button>
                                </div>
                            </div>

                            <!-- Completeness -->
                            <div class="rating-section">
                                <label class="block text-base font-semibold text-gray-900 dark:text-white mb-3">
                                    Completeness
                                    <span class="text-sm font-normal text-gray-600 dark:text-gray-400 ml-2">Does it fully answer the question?</span>
                                </label>
                                <div class="flex flex-wrap gap-2">
                                    <button type="button" class="rating-button px-6 py-3 text-base bg-gray-100 dark:bg-gray-800 hover:bg-primary hover:text-white border border-gray-300 dark:border-gray-700 rounded-lg transition-colors" data-rating="completeness" data-value="1">1 - Incomplete</button>
                                    <button type="button" class="rating-button px-6 py-3 text-base bg-gray-100 dark:bg-gray-800 hover:bg-primary hover:text-white border border-gray-300 dark:border-gray-700 rounded-lg transition-colors" data-rating="completeness" data-value="2">2 - Mostly Incomplete</button>
                                    <button type="button" class="rating-button px-6 py-3 text-base bg-gray-100 dark:bg-gray-800 hover:bg-primary hover:text-white border border-gray-300 dark:border-gray-700 rounded-lg transition-colors" data-rating="completeness" data-value="3">3 - Neutral</button>
                                    <button type="button" class="rating-button px-6 py-3 text-base bg-gray-100 dark:bg-gray-800 hover:bg-primary hover:text-white border border-gray-300 dark:border-gray-700 rounded-lg transition-colors" data-rating="completeness" data-value="4">4 - Mostly Complete</button>
                                    <button type="button" class="rating-button px-6 py-3 text-base bg-gray-100 dark:bg-gray-800 hover:bg-primary hover:text-white border border-gray-300 dark:border-gray-700 rounded-lg transition-colors" data-rating="completeness" data-value="5">5 - Complete</button>
                                </div>
                            </div>

                            <!-- Additional Notes -->
                            <div>
                                <label for="notes" class="block text-base font-semibold text-gray-900 dark:text-white mb-3">
                                    Additional Notes (Optional)
                                </label>
                                <textarea id="notes" rows="4" class="w-full px-4 py-3 text-base bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent resize-none" placeholder="Add any additional comments or observations..."></textarea>
                            </div>

                            <!-- Submit Button -->
                            <div class="flex flex-col sm:flex-row gap-3 pt-4">
                                <button type="submit" id="submitButton" class="flex-1 bg-primary hover:bg-primary-dark text-white font-semibold py-4 px-6 rounded-lg transition-colors text-base">
                                    Submit Annotation
                                </button>
                                <button type="button" id="skipButton" class="sm:w-auto px-6 py-4 text-base bg-gray-200 dark:bg-gray-800 hover:bg-gray-300 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 font-semibold rounded-lg transition-colors">
                                    Skip Task
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Success Modal -->
    <div id="successModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
        <div class="bg-white dark:bg-gray-800 p-8 rounded-xl shadow-2xl max-w-md w-full mx-4 fade-in">
            <div class="text-center">
                <div class="w-16 h-16 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center mx-auto mb-4">
                    <svg class="w-8 h-8 text-green-600 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                    </svg>
                </div>
                <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-2">Annotation Submitted!</h3>
                <p class="text-gray-600 dark:text-gray-400 mb-6">Your feedback has been recorded successfully.</p>
                <button id="closeModal" class="w-full bg-primary hover:bg-primary-dark text-white font-semibold py-3 px-6 rounded-lg transition-colors text-base">
                    Continue
                </button>
            </div>
        </div>
    </div>

    <script>
        // Dark mode detection
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
        }
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            if (event.matches) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        });

        // Sample task data
        const tasks = [
            {
                id: 1,
                title: "Customer Support Query - Refund Policy",
                description: "Evaluate AI response to customer inquiry about refund policy",
                prompt: "What is your refund policy for online purchases?",
                response: "Our refund policy allows returns within 30 days of purchase for most items. To be eligible for a refund, items must be unused and in their original packaging. We process refunds within 5-7 business days after receiving the returned item. Some exclusions apply to perishable goods, custom-made items, and digital downloads. For defective products, we offer free return shipping and a full refund or replacement.",
                status: "pending",
                category: "Customer Support",
                priority: "high"
            },
            {
                id: 2,
                title: "Technical Question - Python Programming",
                description: "Review AI explanation of Python list comprehensions",
                prompt: "Can you explain how Python list comprehensions work with an example?",
                response: "List comprehensions provide a concise way to create lists in Python. The basic syntax is: [expression for item in iterable if condition]. For example: squares = [x**2 for x in range(10)] creates a list of squares from 0 to 81. You can also add conditions: even_squares = [x**2 for x in range(10) if x % 2 == 0] creates squares of only even numbers. List comprehensions are faster and more Pythonic than traditional for loops for creating lists.",
                status: "pending",
                category: "Technical",
                priority: "medium"
            },
            {
                id: 3,
                title: "Medical Information - Cold Symptoms",
                description: "Assess AI response about common cold treatment",
                prompt: "What are the best ways to treat a common cold?",
                response: "To treat a common cold, get plenty of rest (7-9 hours of sleep), stay hydrated by drinking water, herbal teas, and warm liquids like soup. Use over-the-counter medications like acetaminophen or ibuprofen for fever and aches. Gargle with salt water for sore throat relief. Use a humidifier to ease congestion. Vitamin C and zinc supplements may help reduce duration. Most colds resolve in 7-10 days. Consult a doctor if symptoms worsen or persist beyond 10 days, or if you develop high fever, severe headache, or chest pain.",
                status: "pending",
                category: "Medical",
                priority: "high"
            },
            {
                id: 4,
                title: "Recipe Request - Chocolate Chip Cookies",
                description: "Evaluate AI-generated recipe response",
                prompt: "Give me a recipe for chocolate chip cookies.",
                response: "Classic Chocolate Chip Cookies Recipe:\n\nIngredients:\n- 2¼ cups all-purpose flour\n- 1 tsp baking soda\n- 1 tsp salt\n- 1 cup butter, softened\n- ¾ cup granulated sugar\n- ¾ cup brown sugar\n- 2 large eggs\n- 2 tsp vanilla extract\n- 2 cups chocolate chips\n\nInstructions:\n1. Preheat oven to 375°F (190°C)\n2. Mix flour, baking soda, and salt in a bowl\n3. Beat butter and sugars until creamy\n4. Add eggs and vanilla, mix well\n5. Gradually blend in flour mixture\n6. Stir in chocolate chips\n7. Drop spoonfuls onto ungreased baking sheet\n8. Bake 9-11 minutes until golden brown\n9. Cool on baking sheet for 2 minutes\n\nYield: About 60 cookies",
                status: "pending",
                category: "Cooking",
                priority: "low"
            },
            {
                id: 5,
                title: "Financial Advice - Investment Basics",
                description: "Review AI response about investment strategies",
                prompt: "What should a beginner know about investing in stocks?",
                response: "For beginners investing in stocks:\n\n1. Start with education - understand basic concepts like diversification, risk tolerance, and market volatility\n2. Set clear financial goals and timeline\n3. Consider index funds or ETFs for broad market exposure with lower risk\n4. Only invest money you won't need in the next 5+ years\n5. Diversify across different sectors and asset classes\n6. Avoid trying to time the market - use dollar-cost averaging\n7. Keep emotions in check during market fluctuations\n8. Start small and increase investments as you gain confidence\n9. Consider using tax-advantaged accounts like 401(k) or IRA\n10. Review and rebalance your portfolio periodically\n\nConsider consulting a financial advisor for personalized guidance.",
                status: "pending",
                category: "Finance",
                priority: "medium"
            },
            {
                id: 6,
                title: "Travel Planning - Paris Itinerary",
                description: "Evaluate travel recommendations for Paris",
                prompt: "What should I visit in Paris in 3 days?",
                response: "3-Day Paris Itinerary:\n\nDay 1: Classic Paris\n- Morning: Eiffel Tower (arrive early to avoid crowds)\n- Afternoon: Champs-Élysées and Arc de Triomphe\n- Evening: Seine River cruise\n\nDay 2: Art & Culture\n- Morning: Louvre Museum (book tickets online)\n- Afternoon: Notre-Dame Cathedral area and Latin Quarter\n- Evening: Montmartre and Sacré-Cœur Basilica\n\nDay 3: Versailles & Modern Paris\n- Morning: Palace of Versailles (take RER train)\n- Afternoon: Return to Paris, visit Musée d'Orsay\n- Evening: Marais district for dinner and shopping\n\nTips: Buy Paris Museum Pass, use metro for transport, book restaurants in advance, try local bakeries for breakfast.",
                status: "pending",
                category: "Travel",
                priority: "low"
            }
        ];

        // State management
        let currentTask = null;
        let completedToday = 0;
        const ratings = {
            accuracy: null,
            relevance: null,
            safety: null,
            helpfulness: null,
            completeness: null
        };

        // Initialize app
        function init() {
            renderTaskCards();
            setupEventListeners();
            updateCompletedCount();
        }

        // Render task cards
        function renderTaskCards() {
            const taskCardsContainer = document.getElementById('taskCards');
            const filter = document.getElementById('filterStatus').value;

            const filteredTasks = filter === 'all' ? tasks : tasks.filter(t => t.status === filter);

            if (filteredTasks.length === 0) {
                taskCardsContainer.innerHTML = `
                    <div class="col-span-full text-center py-12">
                        <svg class="w-16 h-16 mx-auto text-gray-400 dark:text-gray-600 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                        </svg>
                        <p class="text-gray-600 dark:text-gray-400 text-lg">No tasks available</p>
                    </div>
                `;
                return;
            }

            taskCardsContainer.innerHTML = filteredTasks.map(task => {
                const priorityColors = {
                    high: 'bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400',
                    medium: 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400',
                    low: 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400'
                };

                const statusColors = {
                    pending: 'bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400',
                    completed: 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-400'
                };

                return `
                    <div class="task-card bg-white dark:bg-gray-900 rounded-xl shadow-md border border-gray-200 dark:border-gray-800 overflow-hidden cursor-pointer" data-task-id="${task.id}">
                        <div class="p-6">
                            <div class="flex items-start justify-between mb-3">
                                <span class="text-xs font-semibold px-2.5 py-1 rounded-full ${priorityColors[task.priority]}">${task.priority.toUpperCase()}</span>
                                <span class="text-xs font-semibold px-2.5 py-1 rounded-full ${statusColors[task.status]}">${task.status.toUpperCase()}</span>
                            </div>
                            <h3 class="text-lg font-bold text-gray-900 dark:text-white mb-2 line-clamp-2">${task.title}</h3>
                            <p class="text-sm text-gray-600 dark:text-gray-400 mb-4 line-clamp-2">${task.description}</p>
                            <div class="flex items-center justify-between">
                                <span class="text-xs text-gray-500 dark:text-gray-500 font-medium">${task.category}</span>
                                <button class="text-primary hover:text-primary-dark font-semibold text-sm transition-colors">
                                    Annotate →
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');

            // Add click handlers to task cards
            document.querySelectorAll('.task-card').forEach(card => {
                card.addEventListener('click', () => {
                    const taskId = parseInt(card.dataset.taskId);
                    openTask(taskId);
                });
            });
        }

        // Open task for annotation
        function openTask(taskId) {
            currentTask = tasks.find(t => t.id === taskId);
            if (!currentTask) return;

            // Reset ratings
            Object.keys(ratings).forEach(key => ratings[key] = null);
            document.querySelectorAll('.rating-button').forEach(btn => {
                btn.classList.remove('selected', 'bg-primary', 'text-white');
            });
            document.getElementById('notes').value = '';

            // Populate task details
            document.getElementById('taskTitle').textContent = currentTask.title;
            document.getElementById('taskDescription').textContent = currentTask.description;
            document.getElementById('promptContent').textContent = currentTask.prompt;
            document.getElementById('responseContent').textContent = currentTask.response;

            // Switch views
            document.getElementById('taskListView').classList.add('hidden');
            document.getElementById('annotationView').classList.remove('hidden');

            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Setup event listeners
        function setupEventListeners() {
            // Back button
            document.getElementById('backButton').addEventListener('click', () => {
                document.getElementById('annotationView').classList.add('hidden');
                document.getElementById('taskListView').classList.remove('hidden');
                currentTask = null;
            });

            // Rating buttons
            document.querySelectorAll('.rating-button').forEach(button => {
                button.addEventListener('click', (e) => {
                    e.preventDefault();
                    const ratingType = button.dataset.rating;
                    const value = parseInt(button.dataset.value);

                    // Update rating state
                    ratings[ratingType] = value;

                    // Update UI
                    document.querySelectorAll(`[data-rating="${ratingType}"]`).forEach(btn => {
                        btn.classList.remove('selected', 'bg-primary', 'text-white');
                        btn.classList.add('bg-gray-100', 'dark:bg-gray-800');
                    });
                    button.classList.add('selected', 'bg-primary', 'text-white');
                    button.classList.remove('bg-gray-100', 'dark:bg-gray-800');
                });
            });

            // Submit form
            document.getElementById('annotationForm').addEventListener('submit', (e) => {
                e.preventDefault();
                submitAnnotation();
            });

            // Skip button
            document.getElementById('skipButton').addEventListener('click', () => {
                document.getElementById('annotationView').classList.add('hidden');
                document.getElementById('taskListView').classList.remove('hidden');
                currentTask = null;
            });

            // Close modal
            document.getElementById('closeModal').addEventListener('click', () => {
                document.getElementById('successModal').classList.add('hidden');
                document.getElementById('annotationView').classList.add('hidden');
                document.getElementById('taskListView').classList.remove('hidden');
            });

            // Filter dropdown
            document.getElementById('filterStatus').addEventListener('change', renderTaskCards);
        }

        // Submit annotation
        function submitAnnotation() {
            // Validate all ratings are provided
            const missingRatings = Object.entries(ratings).filter(([key, value]) => value === null);

            if (missingRatings.length > 0) {
                showCustomAlert('Please provide ratings for all criteria before submitting.');
                return;
            }

            // Get notes
            const notes = document.getElementById('notes').value;

            // Simulate submission
            const annotation = {
                taskId: currentTask.id,
                ratings: { ...ratings },
                notes: notes,
                timestamp: new Date().toISOString()
            };

            console.log('Annotation submitted:', annotation);

            // Update task status
            currentTask.status = 'completed';
            completedToday++;
            updateCompletedCount();
            renderTaskCards();

            // Show success modal
            document.getElementById('successModal').classList.remove('hidden');
        }

        // Update completed count
        function updateCompletedCount() {
            document.getElementById('completedCount').textContent = completedToday;
        }

        // Custom alert function (since alert() is not supported)
        function showCustomAlert(message) {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4';
            modal.innerHTML = `
                <div class="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-2xl max-w-sm w-full mx-4 fade-in">
                    <div class="flex items-start mb-4">
                        <svg class="w-6 h-6 text-yellow-500 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
                        </svg>
                        <p class="text-gray-700 dark:text-gray-300">${message}</p>
                    </div>
                    <button class="w-full px-4 py-2 bg-primary text-white hover:bg-primary-dark rounded-lg transition-colors font-semibold text-base" onclick="this.closest('.fixed').remove()">OK</button>
                </div>
            `;
            document.body.appendChild(modal);
        }

        // Initialize on load
        init();
    </script>
</body>
</html>
